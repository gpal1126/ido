<!DOCTYPE html> 
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ido mobile</title> 

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script type="text/javascript" src="/js/web/main/common/m_common.js"></script>
<link rel="stylesheet" href="/css/web/main/m_ido.css" />
<script type="text/javascript" src="/js/web/common/jquery.raty.js" ></script> 

<!-- 메인 슬라이드 -->
<script type="text/javascript" src="/js/web/main/common/slider/shCore.js"></script>
<script type="text/javascript" src="/js/web/main/common/slider/shBrushXml.js"></script>
<script type="text/javascript" src="/js/web/main/common/slider/shBrushJScript.js"></script>
<script src="/js/web/main/common/slider/jquery.easing.js"></script>
<script src="/js/web/main/common/slider/jquery.mousewheel.js"></script>
<script defer src="/js/web/main/common/slider/demo.js"></script>
<script defer src="/js/web/main/common/slider/jquery.flexslider.js"></script>
<link rel="stylesheet" href="/css/web/main/m_flexslider.css" type="text/css" media="screen" />

<script type="text/javascript" src="js/web/survey/m_surveyAnswer.js"></script>
<script src="js/web/survey/amcharts.js" type="text/javascript"></script>
<script src="js/web/survey/pie.js" type="text/javascript"></script>
<!-- <link rel="stylesheet" type="text/css" href="css/web/builder/survey/m_result_survey.css"> -->
<!-- <link rel="stylesheet" type="text/css" href="css/web/main/contents/m_contents.css"> --> <!-- 컨텐츠 css -->

<script src="js/web/common/mobile/mobile-1.2.1.js" type="text/javascript"></script> <!-- tabhold 기능 -->
<script src="js/web/common/zoom/jquery.elevatezoom.js"></script> <!-- lens 기능 -->

<style type="text/css">
	/* 상위이동 div */
  	.top_move_div {
	  	position:fixed;
	  	top: 100px;
	  	right: 10px;
	  	z-index: 1000;
	  	display: none;
  	}
	.top_move_btn {
		background: url('/images/common/main/contents/top_bt1.png') no-repeat;
	  	width: 50px;
	  	height: 50px;
	}
	/* 상위이동 div */
	.survey_category_button{
		position:fixed;
	  	bottom: 10px;
	  	right : 10px;
	  	z-index: 1000;
	}
	.cat_left{
		position: fixed;
		width: 100px;
		height: 400px;
		bottom: 20%;
		right: 72%;
	}
	.cat_right{
		position: fixed;
		width: 100px;
		height: 400px;
		bottom: 20%;
		right: 24%;
	}
	
	#btnControl{
		display: none;
	}
	#btnControl + label > img{
		transform:  rotate(0deg);
	  	-webkit-transition: 0.3s ease-in-out;
	}
	#btnControl:checked + label > img{
		transform:  rotate(45deg);
	  	-webkit-transition: 0.3s ease-in-out;
	}
	/* 우측 사이드 카테고리 컨테이너 */
	.side_button_container{
		position: fixed;
		width: 160px;
		height: 270px;
		bottom: 10%;
		right: -25px;
		z-index: 33;
	}
	
	.category_button{
		width: 130px;
		height: 55px;
		margin-bottom: 20px;
		margin-left: 5%;
		z-index: 33;
	}
	
	.category_button div{
		font-size: 15px; 
		width: 68px; 
		float: left; 
		margin-top: 8px;
		text-align: right;
		display: inline-block;
	}
	
	.category_button img{
		display: inline-block;
		padding-left: 5px;
	}
	.wrap1{
		width:100%;
		height: 100%;
		position: fixed;
		left: 0;
		top:0;
		background-color: #363636;
		opacity: 0.8;
	}
	
	/*설문 Wrap*/
	.surveyWrap{
		width:100%;
		height: 100%;
		position: fixed;
		left: 0;
		top:0;
		background-color: #000000;
		opacity: 0.95;
		overflow: scroll;
	}
	
	.zoomWrap {
		width:100%;
		height: 100%;
		position: fixed;
		left: 0;
		top:0;
		background-color: #000000;
	}
	/* 
	
	#glass {
		position: absolute;
		border-radius: 50%;
		box-shadow: 0 0 0 7px rgba(255, 255, 255, 0.85), 0 0 7px 7px rgba(0, 0, 0, 0.25), inset 0 0 40px 2px rgba(0, 0, 0, 0.25);
		display: none;
		background-repeat: no-repeat;
		background-color: rgba(0,0,0,.6);
		width: 150px;
		height: 150px;
	}
	
	#img_wrapper {
		position: relative;
		width: 55%;
		height: auto;
		margin: 0 5% 0 auto;
		border: 12px solid #fff;
		border-radius: 10px;
		box-shadow: 1px 1px 5px rgba(50,50,50 0.5);
		float: left;
	} 
	*/
	
</style>

<script type="text/javascript">

	/*$.ajax({
		url : 'http://14.63.174.108:5555/checkSurvey',
	  	success:function(data){
	    	for(i in data){
	     		console.log(data[i].CONTENTS_ID)
	      		$('#'+data[i].CONTENTS_ID+'').append('<div style="position:absolute; top:0px; right:0px; width:44px; height:28px;"><img src="/images/common/main/contents/s_right_bt1.png" style="width:100%; height:auto"></div>');
	    	}//end for
	  	}//end success
	});//end ajax*/
  
	$(function(){
	    SyntaxHighlighter.all();
	});
	
	$(window).load(function() {
	    $('.flexslider').flexslider({
	      animation: "slide"
	    });
	});
</script>
<!-- //메인슬라이드 -->

<script type="text/javascript">
	var call = 0 ;
 	
    //이미지로딩 서버로 요청
    function call_image(no, category){
    	call++;
      	console.log('받는값 no::'+no);
      	if(call == 1){
        	$.ajax({
	          	url : 'http://14.63.174.108:5555/m_main?no='+no+'&category='+category,
	          	async: false,
	          	type : 'GET',
	          	success : function(data) {
	            	call = 0;
	            	var jCount = $('#jCount').val();
	            	console.log(data);
	            	//처음 이미지 로딩 할 때 - no값 초기화 선언
	            	var no = 0;
	            	var firstCategory = new Array();
	            	var secondCategory = new Array();
	            	//서버에서 데이터 응답받아 이미지 여러개 가져옴
	            	for(var i in data.contents){
	              		firstCategory[i] = data.contents[i].CATEGORY.split('_')[0];
	              		secondCategory[i] = data.contents[i].CATEGORY.split('_')[1];
	              
						switch(firstCategory[i]){
							case 'fashion':
						    	firstCategory[i]="패션/뷰티"
						      	break;
						  	case 'food':
						    	firstCategory[i]= "음식/여행"
						      	break;    
						  	case 'hobby':
						      	firstCategory[i]="취미/게임"
						      	break;    
						  	case 'life':
						    	firstCategory[i]="생활/쇼핑"
						      	break;    
						  	case 'edu':
						      	firstCategory[i]="정치/교육"
						      	break;    
						  	case 'digital':
						      	firstCategory[i]="디지털/가전"
						      	break;    
						  	case 'car':
						      	firstCategory[i]="자동차/교통"
						      	break;    
						  	case 'media':
						      	firstCategory[i]="방송/연예"
						      	break;                            
						  	case 'sports':
						      	firstCategory[i]="스포츠/건강"
						      	break;        
	              		}//end switch
	          
	          
	       				var category = data.category; 
	              		
			            var categoryTxt = (data.contents[i].CATEGORY.split('_')[0]).toUpperCase();	//카테고리 Txt
			            
	          			if(i % 2 == 0){
				            chg_no = data.no;
				            $('#category').val(category);
	            			if(data.contents[i].IMAGE_TYPE == 'type2'){
	              				$('.left').append(
	              					'<div class="conDiv" style="position: relative; margin-top:1px;" id="'+data.contents[i].CONTENTS_ID+'">'+
	              						'<div style="width:100%; height:100%; background-color:black;"></div>'+
	              						'<div class="cCategory">'+
	              							categoryTxt+' RESEARCH' +
	                        			'</div>'+
	                        			'<div class="cTitle">'+
	              							data.contents[i].SECOND_SURVEY_TITLE+
	                        			'</div>'+
	                      				'<div class="cImage" style="height:100%;">'+
	                        				'<img src="'+data.contents[i].SURVEY_CROP_IMAGE+'" alt="" style="height:208.3px;"/>'+
	                        			'</div>'+
	                        			'<div class="cRegDate">'+'<span><img src="images/common/main/calendar.png"></span>'+
	                        				data.contents[i].REG_DATE+
	                        			'</div>'+
	                        			'<div class="cReply">'+'<span><img src="images/common/main/reply.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">153</span>'+
	                        			'</div>'+
	                      			'</div>');
		               		}else{
		              			$('.left').append(
		                        	'<div class="conDiv" style="position:relative; margin-top:1px;" id="'+data.contents[i].CONTENTS_ID+'">'+
		                        		'<div style="position:absolute; width:100%; height:100%; background-color:black; opacity:0.2"></div>'+
		                        		'<div class="cCategory">'+
		                        			categoryTxt+' RESEARCH' +
	                        			'</div>'+
	                        			'<div class="cTitle">'+
	              							data.contents[i].SECOND_SURVEY_TITLE+
	                        			'</div>'+
		                        		'<div class="cImage" style="height:100%;">'+
		                          			'<img src="'+data.contents[i].SURVEY_CROP_IMAGE+'" alt="" />'+
		                        		'</div>'+
		                        		'<div class="cRegDate">'+'<span><img src="images/common/main/calendar.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">'
				                      	+data.contents[i].REG_DATE+'</span>'+
	                        			'</div>'+
	                        			'<div class="cReply">'+'<span><img src="images/common/main/reply.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">153</span>'+
	                        			'</div>'+
		                      		'</div>');
	               			}//end if
	               			console.log(data.contents[i].CONTENTS_ID)
	          			}else{
	            			chg_no = data.no;
	            
							if(data.contents[i].IMAGE_TYPE == 'type2'){
	            				$('.right').append(
	            					'<div class="conDiv" style="position: relative; margin-top:1px;" id="'+data.contents[i].CONTENTS_ID+'">'+
	            						'<div class="cCategory">'+
	            							categoryTxt+' RESEARCH' +
	                        			'</div>'+
	                        			'<div class="cTitle">'+
	              							data.contents[i].SECOND_SURVEY_TITLE+
	                        			'</div>'+
			                        	'<div class="cImage" style="height:100%;">'+
			                      			'<img src="'+data.contents[i].SURVEY_CROP_IMAGE+'" alt="" style="height:208.3px;"/>'+
			                       		'</div>'+
			                       		'<div class="cRegDate">'+'<span><img src="images/common/main/calendar.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">'
				                      	+data.contents[i].REG_DATE+'</span>'+
	                        			'</div>'+
	                        			'<div class="cReply">'+'<span><img src="images/common/main/reply.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">153</span>'+
	                        			'</div>'+
			                     	'</div>');
	             			}else{
	            				$('.right').append(
				                    '<div class="conDiv" style="position:relative;  margin-top:1px;" id="'+data.contents[i].CONTENTS_ID+'">'+
				                    	'<div style="position:absolute; width:100%; height:100%; background-color:black; opacity:0.2"></div>'+	
				                    	'<div class="cCategory">'+
				                    		categoryTxt+' RESEARCH' +
	                        			'</div>'+
	                        			'<div class="cTitle">'+
	              							data.contents[i].SECOND_SURVEY_TITLE+
	                        			'</div>'+
				                    	'<div class="cImage" style="height:100%;">'+
				                        	'<img src="'+data.contents[i].SURVEY_CROP_IMAGE+'" alt="" />'+
				                      	'</div>'+
				                      	'<div class="cRegDate">'+'<span><img src="images/common/main/calendar.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">'
				                      	+data.contents[i].REG_DATE+'</span>'+
	                        			'</div>'+
	                        			'<div class="cReply">'+'<span><img src="images/common/main/reply.png" style="width:13px; height:13px;"></span><span style="padding-left:5px;">153</span>'+
	                        			'</div>'+
				                    '</div>');
		             		}//if
	          			}//if
	        			/* 현재 pc 화면 */  
	        		}//for
	            
		            //계속 변경되는 no값 - 아래에서 hidden으로 no값을 줌
		            $('#chg_no').val(chg_no);
		            $('#category').val(category);
		            console.log('이미지 로딩 success! 다음 chg_no값:::'+ chg_no);
		            console.log('이미지 로딩 success! 다음 category:::'+ category);
	          	}//end success
        	});//end ajax
        }//end call if
    }//end call_image function
   
    
    //무한 스크롤 구현
    $(window).scroll(function() {
		chg_no = $("#chg_no").val();
 		console.log(chg_no);

		category = $("#category").val();
		console.log(category);
		if(category == 'undefined'){
			console.log('들어옴');
		}else{
			console.log('아님');
		}//end if

		//          스크롤의 위치값        윈도우의 크기
		var scrollHeight = $(window).scrollTop() + $(window).height();
		//현재페이지(문서)의 높이
		var documentHeight = $(document).height();
		/* console.log('documentHeight:'+documentHeight);
		console.log('scrollHeight:'+scrollHeight);*/
		//스크롤 위치값과 현재문서 높이가 같으면 = 스크롤을 끝까지 내리면 
		if((documentHeight - scrollHeight) > 400 && (documentHeight - scrollHeight) < 450) {
			//이미지 로딩 함수 호출
			call_image(chg_no, category);
			console.log('받는 값 chg_no::::'+chg_no);
		}//if
		
		//상위 이동 버튼 
		if(scrollHeight > 750){
		 	$('.top_move_div').css('display','block');
		}else {
		 	$('.top_move_div').css('display','none');
		}//end if
    });
</script>
<style type="text/css">
	.header_menu{
		height: 55px;
	}
</style>
</head>
<body>

<div id="wrap">
<div id="menu_nav">
    <span class="close_bt">
      <a href="#" class="menu_close" id="closemm">메뉴닫기</a>
    </span> 
  
  
  <!-- 우측 메뉴바 클릭시 --> 
    <% if(user == undefined || user == '') { %>
    <p class="userTx">
    </p>  
    <p class="titleTx">로그인</p> 
    <% }else {%>
    <p class="userTx" style="padding-top: 80px;">	
	    <img class="profile_img" src="<%= user.profileImg %>" alt="logo" />
    </p>  
    <% } %>
    
    <form action="/m_login" method="post"> 
      <input placeholder="e-mail을 입력해주세요." type="email" name="userid" id="userid">
      <input placeholder="패스워드를 입력해주세요." type="password" name="password" id="password">
      <div class="findpw"><img src="/images/common/main/find_icon.png" alt=""/> <a href="#">아이디/비밀번호 찾기</a> </div> 

      <% if(user == undefined || user == '') { %>
      	<a href="/auth/facebook" class="facebook_log padding-fix" id="facebook">Facebook Login</a>
        <ul class="login">
        	<li><button class="login_btn" type="submit" id="login"></button></li>
        	<li class="padding-fix"> <a href="#" class="join_ido_btn" id="joinOpen">IDO 계정 만들기</a> </li> 
      	</ul>
      <% }else {%>
        <% if(typeof user == 'object') {%>
            <% if(typeof user.emails == 'string'){ %><!-- 로컬 로그인시 -->
                <div class="user_nickname"><%= user.nickname %></div><!-- session nickname -->
                <div class="user_email"><%= user.emails %></div><!-- session email -->
                <script type="text/javascript">
    	            $('#userid').css('display', 'none');
                  	$('#login').css('display', 'none');
                  	$('#password').css('display', 'none');
                  	$('.findpw').css('display', 'none');
                </script>
            <% }else{%>
              <a href="/logout"><%= user.emails[0].value %></a> <!-- facebook 로그인시 -> 이메일값 있을 때 -->
                <script type="text/javascript">
                  	$('#userid').css('display', 'none');
                  	$('#password').css('display', 'none');
                  	$('#login').css('display', 'none');
                </script>
            <% } %>
        <% }else{ %>
          <a href="/auth/facebook" class="btn btn-fb" id="facebook">Facebook Login</a>
        <% } %>
        <!-- <a class="logout_btn" href="/logout" id="logout">로그아웃</a>
        <a href="/user/myPage?userId=<%= user.userId %>" class="mypage_btn" id="mypageOpen"></a> -->
		<ul class="logout">
        	<li><a class="logout_btn" href="/logout" id="logout">로그아웃</a></li>
        	<li><a href="/user/myPage?userId=<%= user.userId %>" class="mypage_btn" id="mypageOpen">마이페이지</a> </li> 
      	</ul>
      <% } %>      
    </form>
    <div class="login_line"></div>
    <p class="askadmin"> 
    <a href="#" class="asklink"> 제휴문의</a> 
    <br />
    <a href="/upload/m_builder_list" class="asklink partner_office"> 에디터</a> 
    <br />
    <a href="#" class="asklink">Q_A</a> </p> 
  </div>
  <!-- //menu_nav -->  
  
	<section class="header" style="height: 55px; width: 100%; background-color: #164672; position: fixed; z-index:100; ">
		<div class="header_menu" style="float: left; width: 10%;"><img src="/img/lookbig.png" style="width: 20px; height: 20px; padding-top:16px; padding-left: 14px"></div>
		<div class="header_menu"  style="float: left; width: 80%;"><img src="/img/ido_webapp_logo.png" style="width: 39px; height: 20px; padding-top:17px; padding-left: 42%"></div>	
		<div class="header_menu"  style="float: left; width: 10%;">
			<div class="menu"> 
	          <a href="#" class="menuOpen" id="menutest"> <img src="/img/list.png" style="width: 20px; height: 20px; padding-top:16px; padding-right: 11px"> </a> 
	        </div>
		</div>
		<div id="mask"></div>
	</section>
		<div class="flexslider">
	      <ul class="slides">
	        <li>
	          <a href="#"><img src="/main_slide/mobile/m_visual08.jpg" /></a>
	        </li>
	        <li>
	          <a href="m_contents?contentsId=16"><img src="/main_slide/mobile/m_visual01.jpg" /></a>
	        </li>
	        <li>
	          <img src="/main_slide/mobile/m_visual02.jpg" />
	        </li>
	        <li>
	          <img src="/main_slide/mobile/m_visual03.jpg" />
	        </li>
	      </ul>
	    </div>
	    <!-- <div style="max-width: 300px; height: 10px;"></div> -->
		<section class="breaktime">
			<ul id="container" class="list-breaktime">
				<li class="left" style="width: 49.4%; float: left; background-color: white"></li>
				<li class="right" style="width: 50.2%; float: left; padding-left: 1px; background-color: white"></li>
			</ul>
		</section>
		<!-- class="contents-container" -->
	<!--  -->
	
</div>
<div class="surveyWrap">
</div>
<div class="zoomWrap">
</div>
<div class="wrap1">
</div>
<!-- 상위 이동 div -->
<div class="top_move_div">
	<div class="top_move_btn" id="topMoveBtn"></div>
</div>
<!-- 상위 이동 div -->
<div class="side_button_container">
  <div class="cat_left">
    <div class="category_button" onclick="selectCategory(1, 'fashion')"><img src="/images/main/category/mobile/cate_icon01.png"></div>
    <div class="category_button" onclick="selectCategory(2, 'food')"><img src="/images/main/category/mobile/cate_icon02.png"></div>
    <div class="category_button" onclick="selectCategory(3, 'hobby')"><img src="/images/main/category/mobile/cate_icon03.png"></div>
    <div class="category_button" onclick="selectCategory(4, 'life')"><img src="/images/main/category/mobile/cate_icon04.png"></div>
    <div class="category_button" onclick="selectCategory(5, 'edu')"><img src="/images/main/category/mobile/cate_icon05.png"></div>
    <div class="category_button" onclick="selectCategory(6, 'digital')"><img src="/images/main/category/mobile/cate_icon06.png"></div>
  </div>
  <div class="cat_right">
    <div class="category_button" onclick="selectCategory(7, 'car')"><img src="/images/main/category/mobile/cate_icon07.png"></div>
    <div class="category_button" onclick="selectCategory(8, 'media')"><img src="/images/main/category/mobile/cate_icon08.png"></div>  
    <div class="category_button" onclick="selectCategory(9, 'sports')"><img src="/images/main/category/mobile/cate_icon09.png"></div>
    <div class="category_button" onclick="selectCategory(10, 'issue')"><img src="/images/main/category/mobile/cate_icon10.png"></div>
    <div class="category_button" onclick="selectCategory(11, 'digital')"><img src="/images/main/category/mobile/cate_icon11.png"></div>
    <div class="category_button" onclick="selectCategory(12, 'digital')"><img src="/images/main/category/mobile/cate_icon12.png"></div>
  </div>
</div>
<div class="survey_category_button">
  <input type="checkbox" id="btnControl">
  <label for="btnControl">
    <img src="/images/main/category/mobile/cate_icon.png">
  </label>
</div>
<input type="hidden" id="jCount"  value="1"/> 
<input type="hidden" id="chg_no"  value=""/> 
<input type="hidden" id="category"  value=""/> 
<script>
$(document).ready(function(){
	var height = $('.left').width() * 1.66;
	call_image(0);
    $('.wrap1').css('display','none');
    /* 설문조사 wrap*/
    $('.surveyWrap').css('display','none');
    $('.zoomWrap').css('display','none');
    $('.side_button_container').css('display','none');
    
    $('.survey_category_button').click(function(){
    	if($("input:checkbox[id='btnControl']").is(":checked")){
        	$('.wrap1').css('display','');
        	$('.side_button_container').css('display','');
      	}else{
        	$('.wrap1').css('display','none');
        	$('.side_button_container').css('display','none');
      	}//end if
    });//end click
    
    $('.conDiv').click(function(){//컨텐츠 클릭시
      	$('.survey_category_button').css('display','none');
      	$('.header').css({'position':''}); //헤더 고정 풀기
      	$('body').css('position','fixed'); //바디 고정
      	$('.flexslider').css('padding-top','0');	//상단 배너 padding 0
      	console.log($(this).attr('id'));
      	var contentsId = $(this).attr('id');

      	/*ido.setContentId(contentsId) //앱호출 */

      	$('.surveyWrap').css('display','');
      	$.ajax({
        	url:'/m_contents_view?contentsId='+contentsId+'',
        	success:function(data){
          		var survey = data.data1;  //설문 정보
          		console.log(data);
          		$('.surveyWrap').append(
          			'<div class="surveyContainer">'+
                    	'<div class="surveyHeader">'+
                        	'<div class="closeButton"><img src="images/main/survey/sub_close_bt.png"></div>'+
                            '<div class="categoryButton">FOOD_RESEARCH</div>'+
                            '<div class="surveyTitle">'+data.data1[0].SURVEY_TITLE+'</div>'+
                        '</div>'+
                        '<div class="surveyContents"></div>'+
	                    '<div class="surveyFooter"></div>'+
                    '</div>'
                 );
          		//$('.surveyWrap').after('<div class="surveyFooter" style="position:relative; width:100%; overflow: scroll;"></div>');
				/*--------------------------------------------*/
          		for(index in survey){
            		$.ajax({
            			url : '/upload/listSurveySecondTitle?surveyId='+data.data1[0].SURVEY_ID,
            			type : 'GET',
            			success : function(data){
              				console.log(data);
              				//title 값 for
              				for(var i in data.title){
                				//i값 숫자로 변환
				                i = parseInt(i);
				                console.log('survey_type_id::'+data.title[i].SURVEY_TYPE_ID);
				                //답변 타입 텍스트:1, 이미지:2
				                var answerType = data.title[i].SURVEY_ANSWER_TYPE;
				                
				                var idx=0;
				                
				                //첫번째 survey 
				                selectSurveyType(0, i);
                
				                function selectSurveyType(idx, i){
									if(i==idx){
										//설문 유형 타입
									  	var surveyType = data.title[i].SURVEY_TYPE;
									  	if(surveyType=='1'){  //양자택일형
									    	console.log('양자택일형 i::'+i);
									    	var json = {title:data.title[i], reply:data.reply[i]};
										    chooseType(json, i);
									    	//console.log(json);
									  	}else if(surveyType=='2'){  //단수선택형
										    var json = {title:data.title[i], reply:data.reply[i]};
										    selectType(json, i);
									  	}else if(surveyType=='3'){  //복수선택형
										    console.log('복수선택형 i::'+i);
										    var json = {title:data.title[i], reply:data.reply[i]};
										    selectType(json, i);
									  	}else if(surveyType=='4'){  //순위형
										    var json = {title:data.title[i], reply:data.reply[i]};
									    	rankingType(json, i); 
									  	}else if(surveyType=='5'){  //별점채점형
										    var json = {title:data.title[i], reply:data.reply[i]};
										    starType(json, i);
										    //textType(json, i);
									  	}//if
				                  	}//if
				                }//end selectSurveyType function
							}//for  data.title
              
							if(idx!=i){//마지막 설문이 아닐 때
								console.log('설문 마지막이 아님');
								//$('.ui-dialog-buttonset').css('float', 'left')
							   	//$('.ui-dialog-buttonpane').append('<div class=""><button style="position:absolute; left:80%;" class="nextBtn ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" id="selectSuccessBt" value="다음"><span class="ui-button-text">다음</span></button></div>');
							   	$('.surveyFooter').append('<div class="next_bt survey_bt" id="nextBtn"></div>');
							}else if(idx==i){//마지막 설문일 때
								console.log('설문 마지막');
							   	$('#nextBtn').hide();
							   	//$('.ui-dialog-buttonset').css('float', 'left')
							   	//$('.ui-dialog-buttonpane').append('<div class=""><button style="position:absolute; left:80%;" class="finishBtn ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" id="finishBtn" value="완료"><span class="ui-button-text">완료</span></button></div>');
							   	$('.surveyFooter').append('<div class="finish_bt survey_bt" id="finishBtn"></div>');
							}//if
              
							/********** 다음버튼 클릭시 ***********/
							$('#nextBtn').click(function(){
				           		console.log('다음 버튼 클릭');
				                var surveyType = $('#surveyType'+(idx+1)).val();
				                if(surveyType == 1){ //이중택일형
				                  	inputChoice('next', idx);
				                  	var contsRst = contsRstVal.getValue();
				                  	console.log('contsRst:::::::??????'+contsRst);
				                  	if(typeof contsRst=='undefined'){
					                    alert('먼저 이중택일을 해주시기 바랍니다.');
					                    return false;
				                  	}
				                }else if(surveyType==2){ //단수선택형
				                  	inputSelect('next', idx);
				                }else if(surveyType==3){//복수선택형
				                  	inputSelect('next', idx);
				                }else if(surveyType==4){//순위형
				                  	console.log('다음 버튼 클릭 순위형');
				                	inputRank('next', idx);
				                }else if(surveyType==5){//별점채점형
				                	inputStar('next', idx);
				                  	var starScore = starScoreObj.getValue();
				                  	console.log('starScore::::::????'+starScore);
				                  	if(starScore==''){
				                    	alert('해당 답변에 별점을 주시기 바랍니다.');
				                    	return false;
				                  	}
				                  	//inputText('next', idx);
				                }//if
				                
				                idx += 1;
				                for(var j=1; j<=i; j++){
				                  	console.log('j::'+j);
				                  	selectSurveyType(idx, j);
				                  	//$('#surveyDiv'+(j-1)+'').hide();
					                //$('#nextBtn'+(j-1)+'').hide();
					                console.log('i::'+i);
				                }
				                if(idx==i){//마지막일 때
				                	console.log('마지막값::');
				                  	$('#nextBtn').hide();
				                  	//$('.ui-dialog-buttonpane').append('<div class=""><button style="position:absolute; left:80%;" class="finishBtn ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" id="finishBtn" value="완료"><span class="ui-button-text">완료</span></button></div>');
				                  	$('.surveyFooter').append('<div class="finish_bt survey_bt" id="finishBtn"></div>');
				                }//if
			                	$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(idx)+'').hide();
                
				                //다음 버튼 속 완료버튼 클릭시
				                $('#finishBtn').click(function(){
				                	var surveyType = $('#surveyType'+(idx+1)).val();
				                  	if(surveyType == 1){//이중택일형
				                    	inputChoice('finish', idx);
				                    	var contsRst = contsRstVal.getValue();
				                    	console.log('contsRst:::::::??????'+contsRst);
				                    	if(typeof contsRst=='undefined'){
				                      		alert('먼저 이중택일을 해주시기 바랍니다.');
				                      		return false;
				                    	}//end if
				                  	}else if(surveyType==2){//단수선택형
				                    	inputSelect('finish', idx);
				                    	alert('설문을 참여해주셔서 감사합니다.'); //임시
								     	reload_main();	 
				                  	}else if(surveyType==3){//복수선택형
				                    	inputSelect('finish', idx);
				                    	alert('설문을 참여해주셔서 감사합니다.'); //임시
								     	reload_main();	 
				                  	}else if(surveyType==4){//순위형
				                    	inputRank('finish', idx);
				                  	}else if(surveyType==5){//별점채점형
					                    inputStar('finish', idx); 
					                    var starScore = starScoreObj.getValue();
					                    console.log('starScore::::::????'+starScore);
					                    if(starScore==''){
				                      		alert('해당 답변에 별점을 주시기 바랍니다.');
				                      		return false;
				                    	}//end if
				                    	//inputText('finish', idx);
				                  	}//if
				                });//end finish click
              				});//end next click
							/********** 다음버튼 클릭시 ***********/
              
							/********** 완료버튼 클릭시 ***********/
							$('#finishBtn').click(function(){
								console.log('완료버튼 클릭!');
							   	var surveyType = $('#surveyType'+(idx+1)).val();
							   	if(surveyType == 1){//양자택일형
							    	inputChoice('finish', idx);
							     	var contsRst = contsRstVal.getValue();
							     	console.log('contsRst:::::::??????'+contsRst);
							     	if(typeof contsRst=='undefined'){
							       		alert('먼저 이중택일을 해주시기 바랍니다.');
							       		return false;
							     	}//end if
							   	}else if(surveyType==2){//단수선택형
							     	inputSelect('finish', idx);
							     	alert('설문을 참여해주셔서 감사합니다.'); //임시
							     	reload_main();	 
							   	}else if(surveyType==3){//복수선택형
							     	inputSelect('finish', idx);
							     	alert('설문을 참여해주셔서 감사합니다.'); //임시
							     	reload_main();	 
							   	}else if(surveyType==4){//순위형
							    	inputRank('finish', idx);
							   	}else if(surveyType==5){//별점채점형
							    	inputStar('finish', idx); 
							     	var starScore = starScoreObj.getValue();
							     	console.log('starScore::::::????'+starScore);
								    if(starScore==''){
								    	alert('해당 답변에 별점을 주시기 바랍니다.');
								       	return false;
								    }//end if
							     	//inputText('finish', idx);
							 	}//if
							});//end finish click 
							/********** 완료버튼 클릭시 ***********/

						},//end success
            			error : function(error){
            			}
          			});//end ajax 


					function rankingType(json, i){
						console.log('순위형::');
          
						//중질문 타이틀
						var surveyTitleHtml = ''+
							'<form id="surveyForm'+(i+1)+'"><div id="surveyDiv'+(i+1)+'" class="surveyDiv" style="border:0px solid #000; position:relative">'+
						    	'<input type="hidden" id="surveyAnswerType'+(i+1)+'" name="surveyAnswerType" value="'+json.title.SURVEY_ANSWER_TYPE+'">'+
						        '<input type="hidden" id="surveyTypeId'+(i+1)+'" name="surveyTypeId" value="'+json.title.SURVEY_TYPE_ID+'"/>'+
						        '<input type="hidden" id="surveyType'+(i+1)+'" name="surveyType" value="'+json.title.SURVEY_TYPE+'">'+
						        '<div class="rank_type_img" style="margin-left:5%;"></div><br>'+
						        /* '<div class="surveyTypeDiv" style="font-size:1.2em; font-weight:700; margin-left:42%"><div class="typeButton"></div><br><br>'+ */ 
						        	'<div class="surveySecondTitleDiv">'+
						            	'<div class="titleSpan" id="titleSpan'+(i+1)+'"><span style="color:#438CBE;">◎</span> '+json.title.SECOND_SURVEY_TITLE+'</div><br>'+
						            '</div>'+
						        '<div class="contsContainer" style="width:100%; position:absolute; top:80px"></div>'+
              				'</form>';
                        
                    
            
						//중질문 타이틀 append            
						$('#selectSurveyDiv'+(index+1)).append(surveyTitleHtml);
            
                        
          				for(var j in json.reply){
				            console.log('j : '+j);
				            //중질문 답변            
				            var surveyReplyHtml = 
				            	'<div class="contsDiv'+(i+1)+'" id="contsDiv'+(i+1)+'_'+(j+1)+'">';
                        
            				if(json.title.SURVEY_ANSWER_TYPE=='1'){
              					surveyReplyHtml +=  //'<div></div>'+
		                            '<div class="contsTxtDiv">'+
		                            	'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
		                            '</div>';
              				}
              				if(json.title.SURVEY_ANSWER_TYPE=='2'){
                				surveyReplyHtml +=  
                					'<div class="img" name="rankCheckbox"  id="img'+(i+1)+'_'+(j+1)+'" style="content: url('+json.reply[j].SURVEY_IMAGE_PATH+'); width:100px; height:100px;">'+       
                            			'<input type="hidden" name="rank_sub_input'+(i+1)+'" id="sub_input_'+(i+1)+'_'+(j+1)+'" value="">'+
				                		'<input type="hidden" class="surveyContentsId" id="surveyContentsId'+(j+1)+'" name="surveyContentsId" value="'+json.reply[j].SURVEY_CONTENTS_ID+'">'+
                            		'</div>'+             
                          			'<div class="contsTxtDiv" style="text-align:center; color:#8d8d8d; text-decoration:underline; font-size: 0.9em;">'+
                            			'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                          			'</div>';
              				}//if     
              				surveyReplyHtml += 
              					'</div>';
            
							//중질문 답변 append
							$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(i+1)+' .contsContainer').append(surveyReplyHtml);

							switch(json.reply.length){
                				case 2 :
				                	console.log('222222');
			                  		$('div[class*="contsDiv"]').css({'float':'left'});
					                $('.contsContainer').css({'top':'120px'});
					                $('div[class*="contsDiv"]').css({'padding-left':'50px'});  
				                break;
                				case 3 :
                  					console.log('333333');
                  					$('div[class*="contsDiv"]').css({'width':'100px'});
				                    $('div[class*="contsDiv"]').css({'float':'left'});
				                    $('.contsContainer').css({'top':'100px'});
				                    $('div[class*="contsDiv"]').css({'padding-left':'10px'});
                				break;
                				case 4 :
				                  	console.log('44444');
				                  	$('div[class*="contsDiv"]').css({'width':'190px'});
				                  	$('div[class*="contsDiv"]').css({'height':'190px'});
				                  	$('div[class*="contsDiv"]').css({'float':'left'});
				                  	$('.contsContainer').css({'top':'100px'});
                  					/*$('div[class*="contsDiv"]').css({'padding-left':'40px'});*/
                				break;
              				}//end switch
          				}//end for
          
          				var clickCount = 0;
          				$('div[id*=img'+(i+1)+']').click(function(){
            				clickCount++;
            				var matches = 1;
            				var id = $(this).attr('id').split('img'+(i+1)+'_')[1];
            				var rankValue = 1;
            				console.log('count : '+clickCount)
            				if(clickCount > 2){ //2개 이상 선택시
              					if($('#sub_input_'+(i+1)+'_'+id).val()=='1' || $('#sub_input_'+(i+1)+'_'+id).val()=='2'){ //만약 2개이상 클릭시인데 1위 2위를 다시 클릭시 0으로 만듬.
                					$('#sub_input_'+(i+1)+'_'+id).val('0');
                					clickCount = 1;
              					}else{ // 1 2위를 제외한 나머지 이미지 클릭시 alert
                					alert('이미 두개를 선택하셨습니다.')
              					}//end if
            				}else{ // 2개 아래로 선택시
              					$("input[id*=sub_input_"+(i+1)+"]").each(function(index, val) { // 1위가 선택되어있으면 2등의 값을 제공한다.
	                				if ($('input[name="rank_sub_input'+(i+1)+'"]').eq(index).val() == '1') {
                  						rankValue = 2;
                					}
              					});
              					if($('#sub_input_'+(i+1)+'_'+id).val()=='1' || $('#sub_input_'+(i+1)+'_'+id).val()=='2'){
                					$('#sub_input_'+(i+1)+'_'+id).val('0');
              					}else{
                					$('#sub_input_'+(i+1)+'_'+id).val(rankValue);
                					$('#sub_input_'+(i+1)+'_'+id).parent().wrap('<div id="rankWrap'+id+'" style="content : url(images/common/builder/survey/'+rankValue+'.png); width:100px; height:100px;"></div>');
              					}//end if 
            				}//end if

            				var wrapCount = 0;
            				//순위 수정을 원할때 unwrap해주는 function
            				$('div[id*=rankWrap]').click(function(){
              					wrapCount++;
              					if(wrapCount == 2){
                					clickCount = 0;
              					}else{
                					clickCount = 1;
              					}//end if
              					
              					var rankWrapId = $(this).attr('id').split('rankWrap')[1];
              					$('#sub_input_'+(i+1)+'_'+rankWrapId).val('0');
              					$(this).children().unwrap();
            				});//end rankWrap click
          				});//end img click
        			}/*end Rank*/

        			function starType(json, i){
          				console.log('별점형::');
          
          				//중질문 타이틀
          				var surveyTitleHtml = ''+
                        	'<div id="surveyDiv'+(i+1)+'" class="surveyDiv" style="border:0px solid #000; position:relative;">'+
                        		'<input type="hidden" id="surveyAnswerType'+(i+1)+'" name="surveyAnswerType" value="'+json.title.SURVEY_ANSWER_TYPE+'">'+
                      			'<input type="hidden" id="surveyTypeId'+(i+1)+'" name="surveyTypeId" value="'+json.title.SURVEY_TYPE_ID+'"/>'+
                      			'<input type="hidden" id="surveyType'+(i+1)+'" name="surveyType" value="'+json.title.SURVEY_TYPE+'">'+
                      			'<div class="type_star"></div>'+
                      			'<div class="star_type_img" style="margin-left:5%;"></div><br>'+
                      			/* '<div class="surveyTypeDiv" style="font-size:1.2em; font-weight:700; margin-left:42%;"><span class="surveyTypeTxt">별점형</span></div><br>'+ */
                        		'<div class="surveySecondTitleDiv">'+
                          			'<span class="titleSpan" id="titleSpan'+(i+1)+'"><span style="color:#438CBE;">◎</span> '+json.title.SECOND_SURVEY_TITLE+'</span>'+
                          			'<div class="blue_line"></div>'+
                          			'<div class="secSvyTitleDiv">'+
                          				'<img class="secSvyTitleImg" src="'+json.title.SECOND_SURVEY_IMAGE_PATH+'" id="secSvyTitleImg'+(i+1)+'" style="width:100px; height:100px; margin:0 0 0 32%"/>'+
                        			'</div>'+
                        		'</div><br><br>'+
                        		'<div class="starContainer" style="position:absolute; left:110px; top:200px;"></div>'+
                        		'';
                        
						//중질문 타이틀 append            
						$('#selectSurveyDiv'+(index+1)).append(surveyTitleHtml);
            
          
                        
          				for(var j in json.reply){
            				j = parseInt(j);
              				//중질문 답변            
            				var surveyReplyHtml = 
            					'<div class="contsDiv" id="contsDiv'+(i+1)+'_'+(j+1)+'">'+
                          			'<input type="hidden" class="surveyContentsId" id="surveyContentsId'+(j+1)+'" name="surveyContentsId" value="'+json.reply[j].SURVEY_CONTENTS_ID+'">';
                        
            				if(json.title.SURVEY_ANSWER_TYPE=='1'){
              					surveyReplyHtml +=  //'<div></div>'+
                            		'<div class="contsTxtDiv">'+
                              			'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                            		'</div>'+
                            		'<div class="starDiv">'+
                              			'<span class="star" id="star'+(i+1)+'_'+(j+1)+'"></span>'+
                              			'<input type="hidden" class="starRating" id="starRating'+(i+1)+'_'+(j+1)+'"/>'+
                            		'</div>'+
                            		'';
              				}//end if
              				if(json.title.SURVEY_ANSWER_TYPE=='2'){
                				surveyReplyHtml +=  
                            		'<img class="img" src="'+json.reply[j].SURVEY_IMAGE_PATH+'" id="img'+(i+1)+'_'+(j+1)+'" style="width:200px; height:160px;"/>'+
                            		'<div class="contsTxtDiv">'+
                              			'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                            		'</div>'+
                            		'<div class="starDiv" style="position:absolute; margin:-20px 0 0 200px;">'+
                              			'<span class="star" id="star'+(i+1)+'_'+(j+1)+'"></span>'+
                              			'<input type="hidden" class="starRating" id="starRating'+(i+1)+'_'+(j+1)+'"/>'+
                            		'</div>'+
                            		''; 
              				}//if     
                            	'</div>';             
							surveyReplyHtml += 
            	  			'</div>';
              
							//중질문 답변 append
              				$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(i+1)+' .starContainer').append(surveyReplyHtml);
							
              				$('#surveyDiv'+(i+1)+' #star'+(i+1)+'_'+(j+1)+'').raty({
              					score: 0
              					,path : "/images/common/main/result_survey"
              					,width : 200
              					,click: function(score, evt) {
                					var clkContsDiv = $(this).attr('id');
                					//j값 뽑아오기
                					var j = clkContsDiv.split('_')[1];
                					j = parseInt(j);
                  					$('#starRating'+(i+1)+'_'+j+'').val(score);
              					}//end click
            				});//end raty

            				switch(json.reply.length){
	                			case 2 :
	                  				console.log('222222');
	                			break;
	                			case 3 :
	                  				console.log('333333');
	                			break;
              				}//end switch
          				}//for
        			}//end starType 

        
        			function chooseType(json, i){
          				console.log('이중택일형::');
          				
          				//이중택일형 추가한거(0920)
          				//중질문 타이틀
          				var surveyTitleHtml = ''+
                        	'<form id="surveyForm'+(i+1)+'">'+
                        		'<div id="surveyDiv'+(i+1)+'" class="surveyDiv" style="border:0px solid #000;">'+
                        			'<input type="hidden" id="surveyAnswerType'+(i+1)+'" name="surveyAnswerType" value="'+json.title.SURVEY_ANSWER_TYPE+'">'+
                      				'<input type="hidden" id="surveyTypeId'+(i+1)+'" name="surveyTypeId" value="'+json.title.SURVEY_TYPE_ID+'"/>'+
                      				'<input type="hidden" id="surveyType'+(i+1)+'" name="surveyType" value="'+json.title.SURVEY_TYPE+'">'+
                      				'<div class="select_type_img" style="margin-left:5%;"></div><br>'+
                      				/* '<div class="surveyTypeDiv" style="font-size:1.2em; font-weight:700; margin-left:42%"><span class="surveyTypeTxt">선택형</span></div><br>'+ */
                        			'<div class="surveySecondTitleDiv">'+
                          				'<span class="titleSpan" id="titleSpan'+(i+1)+'" style="color:white; z-index:800">'+json.title.SECOND_SURVEY_TITLE+'</span>'+
                        			'</div><br>'+
                        		'</div>'+	
                        	'</form>'+
                        	'';
                    
						//중질문 타이틀 append    
          				$('.surveyContents').append('<div id="selectSurveyDiv'+(index+1)+'"></div>')  
          				$('#selectSurveyDiv'+(index+1)).append(surveyTitleHtml);
						
						for(j in json.reply){
            				j = parseInt(j);
            				console.log('j::'+j);
            				console.log(json.reply[j].SURVEY_CONTENTS_ID);
            				console.log(json.reply[j].SURVEY_CONTENTS);
            				console.log(json.reply[j].SURVEY_IMAGE_PATH);
            				console.log(json.reply[j].SURVEY_CROP_IMAGE);
            
              				//중질문 답변            
            				var surveyReplyHtml = 
            				'<div class="contsDiv'+(i+1)+' img" id="contsDiv'+(i+1)+'_'+(j+1)+'" name="contsDiv'+(i+1)+'_s'+(j+1)+'">';
                          		
                        
            				if(json.title.SURVEY_ANSWER_TYPE=='1'){
              					surveyReplyHtml +=  //'<div></div>'+
                            	'<div class="contsTxtDiv">'+
                              		'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                            	'</div>';
              				}//if
              				
              				if(json.title.SURVEY_ANSWER_TYPE=='2'){
                				surveyReplyHtml +=  
                           		//'<img src="'+json.reply[j].SURVEY_IMAGE_PATH+'" name="selectCheckbox"  id="select_img'+(i+1)+'_'+(j+1)+'" width="100%" height="300px" style="-webkit-transform: translate(0%,-20%);" />'+
                				'<div class="img" name="selectCheckbox"  id="select_img'+(i+1)+'_'+(j+1)+'" style="background: url('+json.reply[j].SURVEY_CROP_IMAGE+'); width:100%; height:100%; background-size: cover; background-position: 0px; background-repeat: no-repeat;">'+        
	                           		'<input type="hidden" class="surveyContentsId" id="surveyContentsId'+(j+1)+'" name="surveyContentsId" value="'+json.reply[j].SURVEY_CONTENTS_ID+'">'+
	                           		'<input type="hidden" name="select_sub_input'+(i+1)+'" id="select_sub_input_'+(i+1)+'_'+(j+1)+'" value="">'+
                            	'</div>'+             
                          		'<div class="contsTxtDiv">'+
                            		'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                          		'</div>'; 
              				}//if     
              
              				surveyReplyHtml += 
              				'</div>';
            
							//중질문 답변 append
              				$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(i+1)+'').append(surveyReplyHtml);

            				console.log('???????????????????? : '+$('div[name$=_s4]').attr('id'));
            				
            				$('div[class*="contsDiv"]').css({'width':'37%'});
            				$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
            				//$('div[class*="contsDiv"]').css({'overflow':'hidden'});
            				
            				console.log('height:::::'+$('div[class*="contsDiv"]').width());
            				switch(json.reply.length){
                				case 2 :
                  					console.log('222222');
                  					$('.contsContainer').css({'top':'120px'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[class*="contsDiv"]').css({'margin':'20% 0 9% 10%'});  
                  					$('div[name$=_s2]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 3 :
                  					console.log('333333');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});  
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2]').css({'margin-left':'5%'});
                  					$('div[name$=_s3]').css({'margin-left':'31%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 4 :
                  					console.log('444444');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 5 :
                  					console.log('555555');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4]').css({'margin-left':'5%'});
                  					//$('div[name$=_s5]').css({'margin-left':'30%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 6 :
                  					console.log('666666');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 7 :
                  					console.log('77777');
                  					//$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6]').css({'margin-left':'5%'});
                  					//$('div[name$=_s7]').css('margin-left','30%');
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 8 :
                  					console.log('88888');
                  					//$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6], div[name$=_s8]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
              				}//end switch

          				}//for
          				//이중택일형 추가한거(0920)
          				
          				
          				
          
          				//중질문 타이틀
          				var surveyTitleHtml = ''+
                        	'<div id="surveyDiv'+(i+1)+'" class="surveyDiv" style="border:0px solid #000; position:relative">'+
                        		'<input type="hidden" id="surveyAnswerType'+(i+1)+'" name="surveyAnswerType" value="'+json.title.SURVEY_ANSWER_TYPE+'">'+
                      			'<input type="hidden" id="surveyTypeId'+(i+1)+'" name="surveyTypeId" value="'+json.title.SURVEY_TYPE_ID+'"/>'+
                      			'<input type="hidden" id="surveyType'+(i+1)+'" name="surveyType" value="'+json.title.SURVEY_TYPE+'">'+
                      			'<div class="choice_type_img" style="margin-left:5%;"></div><br>'+
                      			/* '<div class="surveyTypeDiv" style="font-size:1.2em; font-weight:700; margin-left:39%;"><span class="surveyTypeTxt">이중택일형</span></div><br>'+ */
                        		'<div class="surveySecondTitleDiv">'+
                          			'<div class="blue_line"></div>'+
                          			'<span class="titleSpan" id="titleSpan'+(i+1)+'"><span style="color:#438CBE;">◎</span> '+json.title.SECOND_SURVEY_TITLE+'</span>'+
                        		'</div>'+
                        		'';
          				//중질문 타이틀 append            
          				$('#selectSurveyDiv'+(index+1)).append(surveyTitleHtml);
            
          				for(var j in json.reply){
            				j = parseInt(j);
            				viewConts();
            				if(j>=2){
                				$('#selectSurveyDiv'+(index+1)+' #contsDiv'+(i+1)+'_'+(j+1)+'').hide();
            				}//if
               
              				function viewConts(){
								//중질문 답변            
              					var surveyReplyHtml = 
              					'<span class="contsDiv'+(i+1)+'" id="contsDiv'+(i+1)+'_'+(j+1)+'" style="float:left; padding:0 5px 0 0;">'+
                            		'<input type="hidden" class="surveyContentsId" id="surveyContentsId'+(j+1)+'" name="surveyContentsId" value="'+json.reply[j].SURVEY_CONTENTS_ID+'">';
                          
              					if(json.title.SURVEY_ANSWER_TYPE=='1'){
                					surveyReplyHtml +=    
	                              	'<span class="contsTxtDiv">'+
	                                	'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
	                              	'</span>'+
	                              	'';
                				}else if(json.title.SURVEY_ANSWER_TYPE=='2'){
                  					surveyReplyHtml +=    ''+
	                              	'<a href="#" class="choiceAtag" id="choiceAtag">'+
		                              	'<img class="img" src="'+json.reply[j].SURVEY_IMAGE_PATH+'" id="img'+(i+1)+'_'+(j+1)+'" style="width:100px; height:100px;"/>'+
		                              	'<div class="contsTxtDiv" style="text-align:center; color:#8d8d8d; text-decoration:underline; font-size: 0.9em;">'+
		                                	'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
		                              	'</div>'+
	                              	'</a>'+
	                              	''; 
                				}//end if     
                              	'</span>';            
                              
                				surveyReplyHtml += 
								'</div>';
                
								//중질문 답변 append
                  				$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(i+1)+'').append(surveyReplyHtml);
                
							}//end viewConts function
							
							/* 답변 갯수에 맞춘 css */
            				switch(json.reply.length){
                				case 2 :
                  					$('span[class*=contsDiv]').css('margin-top',40);
                  					$('span[class*=contsDiv]').css('margin-left',47);
                				break;
                				case 3 :
                  					console.log('333333');
                				break;
                				case 4 :
                  					$('span[class*=contsDiv]').css('margin-top',40);
                  					$('span[class*=contsDiv]').css('margin-left',47);
                				break;
                				case 5 :
                  					console.log('555555');
                				break;
              				}//end switch 
          				}//end for
          
            			//중질문 답변 append
            
			            //선택한 답변 배열 선언
			            var contsArr = new Array();
            
			            //시작idx와 끝idx 선언
			            var startIdx = 0;
			            var endIdx = 2;
            
            			//답변 클릭시 function
            			$('span[id*=contsDiv]').click(function(){
				        	//스크롤 고정
				            $( 'html, body' ).stop().animate({ scrollTop : '+=1' });
              
              				console.log('이중택일 답변 클릭!!');  
              
							//선택한 답변 id 선언
              				var choiceContsDiv = $(this).attr('id'); 
              
			              	//선택한 답변 push
              				contsArr.push(choiceContsDiv);
              
              				//중복 제거
              				var choiceContsArr = [];
              				$.each(contsArr, function(idx, elem){
                				if($.inArray(elem, choiceContsArr) == -1){
                  					choiceContsArr.push(elem);
                				}//if
              				});//end each
              
              				startIdx += 2;
              				endIdx += 2;
              
              				if(json.reply.length==2){
                				var contsRst = $(this).attr('id');
                				console.log('contsRst???'+contsRst);
                				if(contsRst.length>0){
                  					$('.selectSurveyDiv span[id*=contsDiv]').hide();  //나머지 답변 숨김
                  					$('.selectSurveyDiv #'+contsRst+'').show(); //마지막 결과 답변만 보여줌
                  					$('#'+contsRst+' #choiceAtag').css('opacity','1.0');
                  
                  					contsRstVal.setValue(contsRst);
                				}//end if
              				}else if(json.reply.length==4){ //답변이 4개일 경우
                  
                  				for(var j in json.reply){
                    				j = parseInt(j);
                    
                    				//2개씩 답변 보여주기
                    				nextConts(j);
                  				}//for
                				if(contsArr.length>=2){
                  					console.log('contsArr::'+contsArr);
                  
                  					for(var no in contsArr){
                    					no = parseInt(no);
                    
                    					var choiceContsDiv = contsArr[no];
                    					console.log('choiceContsDiv::'+choiceContsDiv);
                    					
                    					//선택한 답변 div 배열 보여주기
                    					$('.selectSurveyDiv  #'+choiceContsDiv+'').show();
                    
                    					if(contsArr.length>2){//답변 배열이 2이상이면 배열 마지막 값만 뽑아오기
                      						var contsRst = contsArr[contsArr.length-1]; 
                      						console.log('contsRst::'+contsRst);
                      						console.log('$(this).attr(id)::'+$(this).attr('id'));
                      						if(contsRst.length>0){
                        						if(contsRst==$(this).attr('id')){
                          							$('.selectSurveyDiv #'+contsArr[no]+'').hide(); //나머지 답변 숨김
                          							$('.selectSurveyDiv #'+contsRst+'').show(); //마지막 결과 답변만 보여줌
                          							$('#'+contsRst+' #choiceAtag').css('opacity','1.0');
                          							contsRstVal.setValue(contsRst);
                        						}//if
                      						}//if
                    					}//if
                  					}//for
                				}//if 
              				}else if(json.reply.length==8){ //답변이 8개일 경우
                				console.log('contsArr.length:::'+contsArr.length);
                				console.log('visible:::');
                
                				for(var j in json.reply){
                  					j = parseInt(j);
                  
				                  	//2개씩 답변 보여주기
				                  	nextConts(j);
                				}//for
                
                				//4강    답변 배열 4개 
                				if(contsArr.length>=4){
                  					console.log('답변이 모두 none??');
                  					$('.selectSurveyDiv #contsDiv'+(i+1)+'_'+(j+1)+'').hide();
                  
                  					var conts = contsArr; 
                  					console.log('contsArr::'+contsArr);
                  
					                for(var no in contsArr){
                    					no = parseInt(no);
                    
                    					var choiceContsDiv = contsArr[no];
                    
                    					if(no>=0 && no<2){  //배열의 답변1,답변2 값 2개씩 뿌리기
                      						console.log('contsArr[no]::'+contsArr[no]);
                      						$('.selectSurveyDiv  #'+contsArr[no]+'').show();
                    					}else {
                      						$('.selectSurveyDiv  #'+contsArr[no]+'').hide();
                    					}//if                   
                    
                    					$('.selectSurveyDiv  #'+contsArr[no]+'').click(function(){
                      						for(var no in contsArr){
                        						no = parseInt(no);
					                        	if(no>=2 && no<4){  //배열의 답변3,답변4 값 2개씩 뿌리기
                          							console.log('contsArr[no]::'+contsArr[no]);
                          							$('.selectSurveyDiv #'+contsArr[no]+'').show();
                        						}else {
                          							$('.selectSurveyDiv #'+contsArr[no]+'').hide();
                        						}//if
                      
	                        					//2강(결승) 
	                        					$('.selectSurveyDiv  #'+contsArr[no]+'').click(function(){
	                          						console.log('투투투투투투');
	                          						for(var no in contsArr){
	                            						no = parseInt(no);
	                            						if(no>=4 && no<6){  //답변 선택시 다음 값 2개씩 뿌리기
	                              							console.log('contsArr[no]::'+contsArr[no]);
	                              							$('.selectSurveyDiv #'+contsArr[no]+'').show();
	                            						}else {
	                              							$('.selectSurveyDiv #'+contsArr[no]+'').hide();
	                            						}//if
	                          						}//for
	                          
	                          						if(contsArr.length>4){//답변 배열이 2이상이면 배열 마지막 값만 뽑아오기
	                            
	                            						var contsTmp = []; 
	                            						contsTmp.push(contsArr[contsArr.length-2]); 
	                            						contsTmp.push(contsArr[contsArr.length-1]); 
	                            
	                            						for(var no in contsTmp){  //마지막 답변 뽑아오기
	                              							$('.selectSurveyDiv #'+contsTmp[no]+'').click(function(){
	                                							console.log('$(this).attr(id)::'+$(this).attr('id'));
	                                							contsTmp.push($(this).attr('id'));
	                                							console.log('contsTmp::'+contsTmp);
	                                							var contsRst = contsTmp[contsTmp.length-1];
	                                							console.log('contsRst::'+contsRst);
	                                
	                                							if(contsRst.length>0){
	                                  								if(contsRst==$(this).attr('id')){
	                                    								for(var no in contsTmp){//나머지 답변 숨기기
	                                      									$('.selectSurveyDiv #'+contsTmp[no]+'').hide();
	                                    								}//for
	                                    								//마지막 답변 보여주기
	                                    								$('.selectSurveyDiv #'+contsRst+'').show();
	                                    								$('#'+contsRst+' #choiceAtag').children('img').css({'width':'400px', 'height':'350px'});
	                                    								$('#'+contsRst+' #choiceAtag').css('opacity','1.0');
	                                    								contsRstVal.setValue(contsRst);
	                                  								}//if
	                                							}//if 
	                              							});//end contsTmp click 
	                            						}//for
	                          						}//if
	                        					});//end contsArr[no] click
                      						}//for
                    					});//end contsArr[no] click
                  					}//for
                				}//if
              				}//if
              
							function nextConts(j){
    							if(j>=startIdx && j<endIdx){  //답변 선택시 다음 값 2개씩 뿌리기 
      								console.log('contsClick  j::'+j);
      								//답변 다음값 보이기
      								$('.selectSurveyDiv #contsDiv'+(i+1)+'_'+(j+1)+'').show();
    							}else{
      								//답변 나머지 숨기기
      								$('.selectSurveyDiv #contsDiv'+(i+1)+'_'+(j+1)+'').hide();
    							}//if
  							}//end nextConts funcion
						});//end span[id*=contsDiv] click
        			}/*Choose */


        			function selectType(json, i){
          				console.log('선택형::');
          
          				//중질문 타이틀
          				var surveyTitleHtml = ''+
                        	'<form id="surveyForm'+(i+1)+'">'+
                        		'<div id="surveyDiv'+(i+1)+'" class="surveyDiv" style="border:0px solid #000;">'+
                        			'<input type="hidden" id="surveyAnswerType'+(i+1)+'" name="surveyAnswerType" value="'+json.title.SURVEY_ANSWER_TYPE+'">'+
                      				'<input type="hidden" id="surveyTypeId'+(i+1)+'" name="surveyTypeId" value="'+json.title.SURVEY_TYPE_ID+'"/>'+
                      				'<input type="hidden" id="surveyType'+(i+1)+'" name="surveyType" value="'+json.title.SURVEY_TYPE+'">'+
                      				'<div class="select_type_img" style="margin-left:5%;"></div><br>'+
                      				/* '<div class="surveyTypeDiv" style="font-size:1.2em; font-weight:700; margin-left:42%"><span class="surveyTypeTxt">선택형</span></div><br>'+ */
                        			'<div class="surveySecondTitleDiv">'+
                          				'<span class="titleSpan" id="titleSpan'+(i+1)+'" style="color:white; z-index:800">'+json.title.SECOND_SURVEY_TITLE+'</span>'+
                        			'</div><br>'+
                        		'</div>'+	
                        	'</form>'+
                        	'';
                    
						//중질문 타이틀 append    
          				$('.surveyContents').append('<div id="selectSurveyDiv'+(index+1)+'"></div>')  
          				$('#selectSurveyDiv'+(index+1)).append(surveyTitleHtml);
						
						for(j in json.reply){
            				j = parseInt(j);
            				console.log('j::'+j);
            				console.log(json.reply[j].SURVEY_CONTENTS_ID);
            				console.log(json.reply[j].SURVEY_CONTENTS);
            				console.log(json.reply[j].SURVEY_IMAGE_PATH);
            				console.log(json.reply[j].SURVEY_CROP_IMAGE);
            
              				//중질문 답변            
            				var surveyReplyHtml = 
            				'<div class="contsDiv'+(i+1)+' img" id="contsDiv'+(i+1)+'_'+(j+1)+'" name="contsDiv'+(i+1)+'_s'+(j+1)+'">';
                          		
                        
            				if(json.title.SURVEY_ANSWER_TYPE=='1'){
              					surveyReplyHtml +=  //'<div></div>'+
                            	'<div class="contsTxtDiv">'+
                              		'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                            	'</div>';
              				}//if
              				
              				if(json.title.SURVEY_ANSWER_TYPE=='2'){
                				surveyReplyHtml +=  
                           		//'<img src="'+json.reply[j].SURVEY_IMAGE_PATH+'" name="selectCheckbox"  id="select_img'+(i+1)+'_'+(j+1)+'" width="100%" height="300px" style="-webkit-transform: translate(0%,-20%);" />'+
                				'<div class="img" name="selectCheckbox"  id="select_img'+(i+1)+'_'+(j+1)+'" style="background: url('+json.reply[j].SURVEY_CROP_IMAGE+'); width:100%; height:100%; background-size: cover; background-position: 0px; background-repeat: no-repeat;">'+        
	                           		'<input type="hidden" class="surveyContentsId" id="surveyContentsId'+(j+1)+'" name="surveyContentsId" value="'+json.reply[j].SURVEY_CONTENTS_ID+'">'+
	                           		'<input type="hidden" name="select_sub_input'+(i+1)+'" id="select_sub_input_'+(i+1)+'_'+(j+1)+'" value="">'+
                            	'</div>'+             
                          		'<div class="contsTxtDiv">'+
                            		'<span class="contsTxtSpan" id="contentsSpan'+(i+1)+'_'+(j+1)+'" >'+json.reply[j].SURVEY_CONTENTS+'</span>'+
                          		'</div>'; 
              				}//if     
              
              				surveyReplyHtml += 
              				'</div>';
            
							//중질문 답변 append
              				$('#selectSurveyDiv'+(index+1)+' #surveyDiv'+(i+1)+'').append(surveyReplyHtml);

            				console.log('???????????????????? : '+$('div[name$=_s4]').attr('id'));
            				
            				$('div[class*="contsDiv"]').css({'width':'37%'});
            				$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
            				//$('div[class*="contsDiv"]').css({'overflow':'hidden'});
            				
            				console.log('height:::::'+$('div[class*="contsDiv"]').width());
            				switch(json.reply.length){
                				case 2 :
                  					console.log('222222');
                  					$('.contsContainer').css({'top':'120px'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[class*="contsDiv"]').css({'margin':'20% 0 9% 10%'});  
                  					$('div[name$=_s2]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 3 :
                  					console.log('333333');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});  
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2]').css({'margin-left':'5%'});
                  					$('div[name$=_s3]').css({'margin-left':'31%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 4 :
                  					console.log('444444');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'absolute', 'bottom':'0'});
                				break;
                				case 5 :
                  					console.log('555555');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4]').css({'margin-left':'5%'});
                  					//$('div[name$=_s5]').css({'margin-left':'30%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 6 :
                  					console.log('666666');
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 7 :
                  					console.log('77777');
                  					//$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6]').css({'margin-left':'5%'});
                  					//$('div[name$=_s7]').css('margin-left','30%');
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
                				case 8 :
                  					console.log('88888');
                  					//$('div[class*="contsDiv"]').css({'height':$('#contsDiv'+(i+1)+'_'+json.reply.length+'').width()});
                  					$('div[class*="contsDiv"]').css({'margin':'0 0 10% 10%'});
                  					$('div[class*="contsDiv"]').css({'float':'left'});
                  					$('div[name$=_s2], div[name$=_s4], div[name$=_s6], div[name$=_s8]').css({'margin-left':'5%'});
                  					$('.surveyFooter').css({'position':'', 'padding-bottom':'2%'});
                				break;
              				}//end switch

          				}//for
          				
          				/******* 설문 참여 첫번째 이미지 선택 ******/
          				//설문 참여할 때 첫번째 답변이미지 선택되게 
          				$('div[name$=_s1] input[name*=select_sub_input]').val('1');
         				$('div[name$=_s1] div[id*=select_img]').css('display','');
         				$('div[name$=_s1] input[name*=select_sub_input]').parent().after('<div class="choose_img" id="chooseImg_'+(i+1)+'_1"></div>')
	    				$('#chooseImg_'+(i+1)+'_1').next().css({'position':'relative', 'top':'-70px'});
	    				$('div[name$=_s1] div[id*=select_img]').css('opacity', '0.3');
	    				
	    				$('#chooseImg_'+(i+1)+'_1').click(function(){//선택버튼  클릭 시 해제 
        					$('#chooseImg_'+(i+1)+'_1').remove();
        					$('div[name$=_s1] input[name*=select_sub_input]').val('0');
        					$('div[name$=_s1] input[name*=select_sub_input]').next().css({'position':'', 'top':''});
        					$('div[name$=_s1] div[id*=select_img]').css({'opacity':''});
        					$('div[name$=_s1] div[id*=select_img]').next().css('top','0');
        				});//end chooseImg_* click
          				/******* 설문 참여 첫번째 이미지 선택 ******/
	    				
         				//$('div[id*=select_img'+(i+1)+']').css({ '-webkit-user-select':'none', '-khtml-user-select':'none', '-moz-user-select':'none', 'ms-user-select':'none', 'user-select':'none' });
         				$('div[id*=select_img'+(i+1)+']').css({'-webkit-user-select':'none' }); // 답변이미지 div 복사 방지
         				
          				$('div[id*=select_img'+(i+1)+']').on({ //답변 이미지 div on
          					taphold: function(e) {
//           						var $this = $(this);
//           						console.log('e.type::::::::');
//           						console.log(e.type);
//           						console.log($this.data());
          						
//           						if(e.type == 'click' && $this.data("taphold")){
//           							return false;
//           							e.preventDefault();
//           						}
//           						$this.removeData('longTapRegistered');
          						
          						
	         					var id = $(this).attr('id').split('img'+(i+1)+'_')[1];
	         					
          						$('#zoomBtn_'+(i+1)+'_'+id+'').css({'-webkit-user-select':'none' });	//돋보기 div 복사방지
          						$('#zoomBtn_'+(i+1)+'_'+id+'').children().css({'-webkit-user-select':'none' });
          						
          						$('#select_sub_input_'+(i+1)+'_'+id).parent().after('<div class="zoom_btn" id="zoomBtn_'+(i+1)+'_'+id+'"><img class="magnifying"></div>')
			    				$('#zoomBtn_'+(i+1)+'_'+id+'').next().css({'position':'relative', 'top':'-70px'});
          						$('#contentsSpan'+(i+1)+'_'+id+'').parent().css('top','-140px');
          						
          						$('#zoomBtn_'+(i+1)+'_'+id+'').click(function(e){
          							return false;
          							e.preventDefault();
          						});
          						
          						$('#zoomBtn_'+(i+1)+'_'+id+'').on({
          							taphold: function(e) {
          								
          								$('#zoomBtn_'+(i+1)+'_'+id+'').remove();
              							$('#contentsSpan'+(i+1)+'_'+id+'').parent().css('top','0px');
          							},
          							click: function(e) {
          								var surveyContentsId = $(this).parents().children('.img').children('.surveyContentsId').val();
          								location.href="/view_origin_image?surveyContentsId="+surveyContentsId;
          								
          								/* $('.zoomWrap').css('display','');
              							$('.zoomWrap').append('	<img class="origin_img" id="origin_img'+(i+1)+'_'+(id)+'" src="'+json.reply[(id-1)].SURVEY_IMAGE_PATH+'" data-zoom-image="'+json.reply[(id-1)].SURVEY_IMAGE_PATH+'" style=" width:90%; height:auto; margin:30% 0 0 5%; ">'+        
                  							  '<div class="lens_btn lens_img" id="lens_img'+(i+1)+'_'+(id)+'" style="position:absolute; top:10%; right:8%; color:#fff; ">돋보기</div>'+
                  							  '<div class="lens_btn cancel_img" id="cancel_img'+(i+1)+'_'+(id)+'" style="position:absolute; top:10%; right:8%; display:none; z-index:1000; color:#fff;">취소</div>' 
    											); */
    									$('.lens_btn').click(function(){
    										$('.lens_btn').toggle();	//토글 사용
    										
    										$('.lens_btn').toggle().is(':visible');	//렌즈 토글 visible 
    										if( $('.lens_btn').toggle().is(':visible') == true ){	//보이는 텍스트이면
    											console.log( $(this).text() );
    											if( $(this).text()=='돋보기' ){//돋보기 클릭시
    												console.log('돋보기!');
    			    								$('#origin_img'+(i+1)+'_'+(id)+'').elevateZoom({
    			        								zoomType: 'lens',
    			        								lensShape: 'round',
    			        								zoomLens: true
    			        							});
    											}else if( $(this).text()=='취소' ){//취소 클릭시
    												console.log('취소!');
    												$('.zoomLens').css('display','none');
    											}
    										}
    									});//lens_btn click 
          							}
          						});//zoomBtn_* on function
          						
//           						$('#zoomBtn_'+(i+1)+'_'+id+'').on('taphold', function(e){
//           							$('#zoomBtn_'+(i+1)+'_'+id+'').remove();
//           							$('#contentsSpan'+(i+1)+'_'+id+'').parent().css('top','0px');
//           						});
          						
//           						$('#zoomBtn_'+(i+1)+'_'+id+'').click(function(e){
          							
//           							$('.zoomWrap').css('display','');
//           							$('.zoomWrap').append('	<img class="origin_img" id="origin_img'+(i+1)+'_'+(id)+'" src="'+json.reply[(id-1)].SURVEY_IMAGE_PATH+'" data-zoom-image="'+json.reply[(id-1)].SURVEY_IMAGE_PATH+'" style=" width:90%; height:auto; margin:30% 0 0 5%; ">'+        
//               							  '<div class="lens_btn lens_img" id="lens_img'+(i+1)+'_'+(id)+'" style="position:absolute; top:10%; right:8%; color:#fff; ">돋보기</div>'+
//               							  '<div class="lens_btn cancel_img" id="cancel_img'+(i+1)+'_'+(id)+'" style="position:absolute; top:10%; right:8%; display:none; z-index:1000; color:#fff;">취소</div>' 
// 											);
									
// 									$('.lens_btn').click(function(){
// 										$('.lens_btn').toggle();	//토글 사용
										
// 										$('.lens_btn').toggle().is(':visible');	//렌즈 토글 visible 
// 										if( $('.lens_btn').toggle().is(':visible') == true ){	//보이는 텍스트이면
// 											console.log( $(this).text() );
// 											if( $(this).text()=='돋보기' ){//돋보기 클릭시
// 												console.log('돋보기!');
// 			    								$('#origin_img'+(i+1)+'_'+(id)+'').elevateZoom({
// 			        								zoomType: 'lens',
// 			        								lensShape: 'round',
// 			        								zoomLens: true
// 			        							});
// 											}else if( $(this).text()=='취소' ){//취소 클릭시
// 												console.log('취소!');
// 												$('.zoomLens').css('display','none');
// 											}
// 										}
// 									});//lens_btn click 
									
// 								});//zoomBtn_* click
          						
          					},
          					click : function(e){
          						
	         					var id = $(this).attr('id').split('img'+(i+1)+'_')[1];
          					  
    			  				console.log('id : '+id);
    			  				if($('#select_sub_input_'+(i+1)+'_'+id).val()=='1'){
    			    				//$('#select_sub_input_'+(i+1)+'_'+id).val('0');
    			    				//$('#select_sub_input_'+(i+1)+'_'+id).parent().after('<div class="choose_img" style="content : url(images/common/builder/survey/sub_chose_icon.png); width:100px; height:100px; position:relative; top:-130px; left:50px;"></div>')
    			  				}else{
    			    				$('#select_sub_input_'+(i+1)+'_'+id).val('1');
    			    				//$('#select_sub_input_'+(i+1)+'_'+id).parent().wrap('<div id="selectWrap'+id+'" style="content : url(images/common/builder/survey/check_img2.png); width:100px; height:100px;"></div>');
    			    				$('#select_sub_input_'+(i+1)+'_'+id).parent().after('<div class="choose_img" id="chooseImg_'+(i+1)+'_'+id+'"></div>')
    			    				$('#chooseImg_'+(i+1)+'_'+id+'').next().css({'position':'relative', 'top':'-70px'});
    			    				$(this).css('opacity', '0.3');
    			    
    			    				if( $('.survey_bt').css('display') == 'none' ){ //설문 선택시 선택완료 버튼 하나만 생성 
    			  	  					$('.survey_bt').css('display', '');
    			  	  					//$('.next_bt').css('display', '');
    			  	  					//$('.finish_bt').css('display', '');
    			     					//$('.surveyFooter').append('<div class="success_bt" id="selectSuccessBt" style="content : url(images/common/builder/survey/select_success_bt.png); width:100%;"></div>');
    			    				}//end if
    			 				}//end if
    			  
    				            /* $('div[id*=selectWrap]').click(function(){
    				            	var selectWrap = $(this).attr('id').split('selectWrap')[1];
    				             	$('#select_sub_input_'+(i+1)+'_'+selectWrap).val('0');
    				              	$(this).children().unwrap();
    				            }) */
                
                				//선택 이미지 클릭시 선택 제거
                				$('#chooseImg_'+(i+1)+'_'+id+'').click(function(){
                					$('#chooseImg_'+(i+1)+'_'+id+'').remove();
                					$('#select_sub_input_'+(i+1)+'_'+id).val('0');
                					$('#select_img'+(i+1)+'_'+id+'').next().css({'position':'', 'top':''});
                					$('#select_img'+(i+1)+'_'+id+'').css({'opacity':''});
    	            				if( $('.choose_img').val() == undefined ){//선택이미지가 모두 없으면 선택완료 버튼 제거
    	            					//$('.next_bt').css('display', 'none');
    	            					//$('.finish_bt').css('display', 'none');
    	            				}//if
                				});//end chooseImg_* click
          					}
          				});
          				
        			}/*end selectType */
        			
        			
        		} /*surveyFor문 끝*/
          		/*--------------------------------------------*/
			}//end success
		});//end ajax  
    }); /*conDiv Click function 끝*/
    
    $('.surveyWrap').on('click', '.closeButton',function(){ //설문 닫기시 
    	reload_main();
    });
    
    function reload_main(){
    	$('.surveyWrap').empty(); 
        $('.surveyWrap').css('display','none'); 
        $('.survey_category_button').css('display','')
        $('.header').css({'position':'fixed'});	//헤더 고정
        $('body').css('position','');	//바디 고정 풀기
        $('.flexslider').css('padding-top','45px');	//상단 배너 padding-top
    }
	/*---------------------------------------------------------*/
	$('.conDiv').css('height', height);
});//end ready
</script>
<script>
	$('#topMoveBtn').click(function(){ //상위 이동
		window.scroll(0, 0);	
	});
	function selectCategory(categoryId, value){
		console.log('categoryId:::::::::'+categoryId);
	   	console.log('value:::::::::'+value);
	   	$('.left').empty();
	   	$('.right').empty();
	   	$('.wrap1').css('display','none');
	   	$('.side_button_container').css('display','none');
	   	$('#btnControl').attr('checked', false);
	   	call_image(0, value);
 	}
</script>
<style type="text/css">
  @import url(http://fonts.googleapis.com/earlyaccess/nanumgothic.css);
  .cCategory{
		font-size: 7pt;
		font-weight: bold;
		font-family: "Nanum Gothic", sans-serif;
		color: white;
		position:absolute;
		top: 6%;
		left: 10px;
	}
	.cTitle{
		font-size: 18pt;
		font-family: "Nanum Gothic", sans-serif;
		color: white;
		position:absolute;
		top: 14%;
		left: 10px;
	}
	.cRegDate{
		font-size: 9pt;
		font-weight: bold;
		font-family: "Nanum Gothic", sans-serif;
		color: white;
		position:absolute;
		top: 90%;
		left: 10px;
	}
	.cRegDate span{
		float: left;
	}
	.cReply{
		font-size: 9pt;
		font-weight: bold;
		font-family: "Nanum Gothic", sans-serif;
		color: white;
		position:absolute;
		top: 90%;
		right: 20px;
	}
	.cReply span{
		float: left;
	}

  .surveyContainer{
    /* position: relative; */
    width: 100%;
    height: 90%;
    z-index: 1000;
  }
  /*header*/
  .surveyHeader{
    /* position: absolute; */
    top: 0;
    width: 100%;
    height: 100px;
    text-align: center;
  }
  .closeButton{
    position: absolute;
    top: 10px;
    left: 46.3%;
    width: 30px;
    height: 30px;
    z-index: 1000;
  }
  .categoryButton{
    position: absolute;
    top: 55px;
    width: 100%;
    height: 25px;
    color: white;
    font-size: 6pt;
    font-family: "Nanum Gothic", sans-serif;
  }
  .surveyTitle{
    position: absolute;
    top: 90px;
    width: 100%;
    height: 25px;
    color: white;
    font-family: "Nanum Gothic", sans-serif;
    font-weight: bold;
    font-size: 16pt; 
  }
  .titleSpan{
    font-family: "Nanum Gothic", sans-serif;
    font-weight: bold;
    font-size: 16pt; 
  }
  /*header*/
  .surveyContents{
    /* position: absolute; */
    width: 100%;
    height: 78%;
    top: 97px; 
    text-align: center;   

  }
  
  .choose_img{
  	content: url(images/common/builder/survey/sub_chose_icon.png);
    width: 70px;
    height: 70px;
    position: relative;
    top: -105px;
    left: 35px;
    -webkit-border-radius: 50%;
  }
  
  .zoom_btn {
  	position: relative;
  	top: -140px;
    left: 0px;
    font-size: 2em;
    width: 100%;
    height: 100%;
  }
  
  .magnifying{
  	content: url(images/common/builder/survey/sub_chose_icon2.png);
  	width: 45%;
  	height: 45%;
  	margin-top: 27%;
  }
  
  .contsTxtDiv{
  	text-align: center;
    color: white;
    font-size: 0.9em;
    font-weight: bold;
    margin-top: 5%;
  }
  
  .surveyFooter{
  	margin: 0 0 2% 5% ;
  	width: 90%;
  }
  
  .next_bt {
  	content: url("images/common/builder/survey/next_bt.png");
    width: 100%;
  }
  
  .finish_bt {
  	content: url("images/common/builder/survey/finish_bt_bold.png");
    width: 100%;
  }
  
  .img{

   -webkit-border-radius:100%;
  -moz-border-radius:100%;
  }
</style>
<div class="surveyAnswer_container" style="display:none">
</div>
<input type="hidden" id="count">
</body>
</html>